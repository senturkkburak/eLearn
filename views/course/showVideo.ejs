<%- include ('../partials/header') %>
  <script src="https://cdn.ckeditor.com/4.19.0/standard/ckeditor.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <style>
    video {
      width: 100%;
      height: 500px;
    }

    #pp {
      border-radius: 50%;
      width: 50px;
      height: 50px;
    }

    #questionTitle {
      display: inline;
    }

    #soruSor {
      cursor: pointer;
    }

    .form-control {
      border: 1px solid #000;
    }
  </style>
  </head>

  <body>
    
            <video controls>
              <source src="/video/<%= videoNam%>" type="video/mp4">
              <!-- <source src="movie.ogg" type="video/ogg"> -->
              Your browser does not support the video tag.
            </video>

              <div class="questionContainer m-5">
                <h3 class="display-6 mb-3">Bu kurstaki sorular</h3>
                <div class="questionContent mb-5">
                  <% foundQuestions.forEach( (question)=>{ %>
                  <p class="text-center" style="font-size: 18px; margin-bottom: 15px;" id="questionTitle"><%=   question.questionTitle  %></p>
                  <p style="font-size: 18px;" id="questionBody"><%=   question.questionBody  %></p>
                </div>
                <% });  %>
              </div>
              <p id="soruSor" class="text-center mb-5" style="cursor: pointer; font-size: 25px; ">Yeni soru sor</p>
             
              <div id="questionForm" class="container questionForm mt-5">
                <form action="/showVideo" method="POST">
                  <div class="form-group mb-3">
                    <div class="form-label">Başlık veya Özet</div>
                    <input name="questionTitle" type="text" id="title" class="form-control">
                  </div>
                  <div class="form-group mb-3">
                    <div class="form-label">Ayrıntılar(isteğe bağlı)</div>
                    <textarea name="questionBody" id="Ayrıntılar"></textarea>
                  </div>
                  <div class="form-group mb-3">

                    <input type="submit" id="submit" class="form-control btn btn-outline-success btn-lg">
                  </div>
                </form>
                <button class="btn btn-outline-danger btn-lg w-100 mt-3 mb-3">Tüm Sorulara Geri Dön</button>
              </div>

              <script>
                CKEDITOR.replace('Ayrıntılar');
              </script>

              <script>
                $(document).ready(function () {
                  $("#questionForm").hide();
                  $("#soruSor").click(function () {
                    
                    $("#questionForm").show();
                    $("#questionContainer").hide();
                  });
                });
                $(document).ready(function () {
                  
                  $("button").click(function () {
                    $(".questionContainer").show();
                    $("#questionForm").hide();
                  });
                });


              </script>

              <script>
                $(document).ready(function () {
                  $("#submit").click(function () {
                    var questionTitle = $("#title").val();
                    var questionBody = CKEDITOR.instances.Ayrıntılar.getData();

                    let data = {
                      questionTitle: questionTitle,
                      questionBody: questionBody,
                    }

                    $.post("showVideo", { data: data })
                        .then(function (addedQuestion) {
                            console.log(addedQuestion)
                        });
                    
                  });

                });
              </script>




              <%- include ('../partials/footer') %>